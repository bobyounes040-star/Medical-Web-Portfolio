{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\clinic-system\\\\frontend\\\\src\\\\pages\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport api from \"../api/axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    login\n  } = useContext(AuthContext);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [msg, setMsg] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const submit = async e => {\n    e.preventDefault();\n    setMsg(\"\");\n    setError(\"\");\n    setLoading(true);\n    try {\n      const res = await api.post(\"/auth/login\", {\n        email,\n        password\n      });\n      login(res.data.token, res.data.user);\n      const next = localStorage.getItem(\"afterLogin\");\n      if (next) {\n        localStorage.removeItem(\"afterLogin\");\n        navigate(next);\n      } else {\n        navigate(\"/\");\n      }\n    } catch (err) {\n      var _err$response;\n      const data = err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data;\n      if (data !== null && data !== void 0 && data.needsVerification) {\n        localStorage.setItem(\"pendingEmail\", email);\n        setError(data.message || \"Please verify your email.\");\n      } else {\n        setError((data === null || data === void 0 ? void 0 : data.message) || \"Login failed\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mx-auto max-w-md rounded-2xl bg-white p-6 shadow\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-semibold text-slate-900\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), msg && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 rounded-xl bg-emerald-50 p-3 text-sm text-emerald-700\",\n      children: msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 rounded-xl bg-red-50 p-3 text-sm text-red-700\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      className: \"mt-5 space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"w-full rounded-xl border p-3\",\n        placeholder: \"Email\",\n        value: email,\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"w-full rounded-xl border p-3\",\n        placeholder: \"Password\",\n        type: \"password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        disabled: loading,\n        className: \"w-full rounded-xl bg-emerald-600 px-4 py-3 font-semibold text-white hover:bg-emerald-700 disabled:opacity-60\",\n        children: loading ? \"Logging in...\" : \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex items-center justify-between text-sm\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        className: \"text-emerald-700 underline\",\n        to: \"/signup\",\n        children: \"Create account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        className: \"text-emerald-700 underline\",\n        to: \"/verify\",\n        children: \"Verify email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"gBc8LVjTQLWOSAVjwT9cmVkkDTA=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useContext","useState","Link","useNavigate","api","AuthContext","jsxDEV","_jsxDEV","Login","_s","navigate","login","email","setEmail","password","setPassword","msg","setMsg","error","setError","loading","setLoading","submit","e","preventDefault","res","post","data","token","user","next","localStorage","getItem","removeItem","err","_err$response","response","needsVerification","setItem","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","value","onChange","target","type","disabled","to","_c","$RefreshReg$"],"sources":["C:/Users/PC/Desktop/clinic-system/frontend/src/pages/Login.js"],"sourcesContent":["import { useContext, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport api from \"../api/axios\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nexport default function Login() {\r\n    const navigate = useNavigate();\r\n    const { login } = useContext(AuthContext);\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [msg, setMsg] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const submit = async (e) => {\r\n        e.preventDefault();\r\n        setMsg(\"\"); setError(\"\");\r\n        setLoading(true);\r\n\r\n        try {\r\n            const res = await api.post(\"/auth/login\", { email, password });\r\n            login(res.data.token, res.data.user);\r\n\r\n            const next = localStorage.getItem(\"afterLogin\");\r\n            if (next) {\r\n                localStorage.removeItem(\"afterLogin\");\r\n                navigate(next);\r\n            } else {\r\n                navigate(\"/\");\r\n            }\r\n        } catch (err) {\r\n            const data = err?.response?.data;\r\n            if (data?.needsVerification) {\r\n                localStorage.setItem(\"pendingEmail\", email);\r\n                setError(data.message || \"Please verify your email.\");\r\n            } else {\r\n                setError(data?.message || \"Login failed\");\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"mx-auto max-w-md rounded-2xl bg-white p-6 shadow\">\r\n            <h1 className=\"text-2xl font-semibold text-slate-900\">Login</h1>\r\n\r\n            {msg && <div className=\"mt-4 rounded-xl bg-emerald-50 p-3 text-sm text-emerald-700\">{msg}</div>}\r\n            {error && <div className=\"mt-4 rounded-xl bg-red-50 p-3 text-sm text-red-700\">{error}</div>}\r\n\r\n            <form onSubmit={submit} className=\"mt-5 space-y-3\">\r\n                <input className=\"w-full rounded-xl border p-3\" placeholder=\"Email\"\r\n                    value={email} onChange={(e) => setEmail(e.target.value)} />\r\n                <input className=\"w-full rounded-xl border p-3\" placeholder=\"Password\" type=\"password\"\r\n                    value={password} onChange={(e) => setPassword(e.target.value)} />\r\n\r\n                <button disabled={loading}\r\n                    className=\"w-full rounded-xl bg-emerald-600 px-4 py-3 font-semibold text-white hover:bg-emerald-700 disabled:opacity-60\">\r\n                    {loading ? \"Logging in...\" : \"Login\"}\r\n                </button>\r\n            </form>\r\n\r\n            <div className=\"mt-4 flex items-center justify-between text-sm\">\r\n                <Link className=\"text-emerald-700 underline\" to=\"/signup\">Create account</Link>\r\n                <Link className=\"text-emerald-700 underline\" to=\"/verify\">Verify email</Link>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}